# Контроль загрузки ресурсов `loading="lazy"`, `fetchpriority`

Контроль загрузки ресурсов в HTML - это важный аспект оптимизации скорости сайта и Core Web Vitals.

## Что такое "контроль загрузки"?

Это управление тем, когда и с каким приоритетом браузер загружает ресурсы, такие как изображения, видео, iframe и т. д.

Это влияет на:

* скорость загрузки страницы (LCP)
* использование трафика
* восприятие скорости пользователем

## loading="lazy"

Откладывает загрузку ресурса до тех пор, пока он не попадет в зону видимости экрана (или рядом с ней).

Используется только для: `img` и `iframe`.

```html
<img src="photo.jpg" alt="..." loading="lazy"/>
```

Браузер не загрузит изображение до тех пор, пока пользователь не прокрутит страницу ближе к нему.

### Важно

Не использовать `loading="lazy"` для изображений первого экрана.

## fetchpriority

Позволяет явно указать браузеру, насколько важен ресурс.

Поддерживается браузерами с 2022 года (Chrome, Edge, частично Safari).

Доступные значения:

| Значение | Описание                         |
|----------|----------------------------------|
| `high`   | Загрузить как можно раньше       |
| `low`    | Отложить загрузку                |
| `auto`   | По умолчанию (браузер сам решит) |

Приоритет для главного изображения:

```html
<img src="hero.jpg" alt="Главное изображение" fetchpriority="high"/>
```

Уменьшить приоритет менее важных изображений:

```html
<img src="footer-icon.svg" alt="..." fetchpriority="low" loading="lazy"/>
```

## Как использовать fetchpriority и loading="lazy" вместе?

```html
<img
        src="team.jpg"
        alt="Наша команда"
        loading="lazy"
        fetchpriority="low"
/>
```

### Советы по использованию

| Где?                   | loading     | fetchpriority                |
|------------------------|-------------|------------------------------|
| Main Image             | **не lazy** | `high`                       |
| Галерея под Main Image | `lazy`      | `low`                        |
| iframes ниже экрана    | `lazy`      | —                            |
| Кнопки, иконки         | —           | `low` (если SVG/изображения) |

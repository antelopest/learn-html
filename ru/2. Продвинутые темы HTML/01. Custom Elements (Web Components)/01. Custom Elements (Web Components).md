# Custom Elements (Web Components) #

**Custom Elements** - —ç—Ç–æ —è–¥—Ä–æ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏ Web Components, –∫–æ—Ç–æ—Ä–∞—è –ø–æ–∑–≤–æ–ª—è–µ—Ç —Å–æ–∑–¥–∞–≤–∞—Ç—å —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–µ HTML-—Ç–µ–≥–∏ —Å–æ —Å–≤–æ–µ–π
–ª–æ–≥–∏–∫–æ–π,
—Å—Ç–∏–ª—è–º–∏ –∏ –ø–æ–≤–µ–¥–µ–Ω–∏–µ–º. –≠—Ç–æ –ø–æ—Ö–æ–∂–µ–µ –Ω–∞ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –≤ React, Vue, Angular, —Ç–æ–ª—å–∫–æ –Ω–∞ —á–∏—Å—Ç–æ–º JS, –±–µ–∑ —Ñ—Ä–µ–π–º–≤–æ—Ä–∫–æ–≤.

## –ß—Ç–æ —Ç–∞–∫–æ–µ Custom Elements? ##

–≠—Ç–æ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –æ–±—ä—è–≤–∏—Ç—å —Å–≤–æ–π HTML-—ç–ª–µ–º–µ–Ω—Ç, –Ω–∞–ø—Ä–∏–º–µ—Ä:

````html

<user-card name="Sam"></user-card>
````

–ü–æ–ª–Ω–æ—Ü–µ–Ω–Ω—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç:

* html —à–∞–±–ª–æ–Ω
* —Å—Ç–∏–ª–∏
* –ª–æ–≥–∏–∫–∞

## –°–æ—Å—Ç–∞–≤–ª—è—é—â–∏–µ Web Components ##

| –ß–∞—Å—Ç—å             | –ß—Ç–æ –¥–µ–ª–∞–µ—Ç                                |
|-------------------|-------------------------------------------|
| `Custom Elements` | –ü–æ–∑–≤–æ–ª—è–µ—Ç —Å–æ–∑–¥–∞–≤–∞—Ç—å —Å–≤–æ–∏ HTML —Ç–µ–≥–∏        |
| `Shadow DOM`      | –ò–Ω–∫–∞–ø—Å—É–ª–∏—Ä—É–µ—Ç —Å—Ç–∏–ª–∏ –∏ —Ä–∞–∑–º–µ—Ç–∫—É –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ |
| `HTML templates`  | –®–∞–±–ª–æ–Ω—ã —Ä–∞–∑–º–µ—Ç–∫–∏ (`<template>`)           |
| `ES Modules`      | –ü–æ–∑–≤–æ–ª—è—é—Ç —Ä–∞–∑–±–∏–≤–∞—Ç—å –∫–æ–¥ –ø–æ —Ñ–∞–π–ª–∞–º         |

–†–∞—Å—Å–º–æ—Ç—Ä–∏–º –ø—Ä–∏–º–µ—Ä:

**user-card.js**

````js
class UserCard extends HTMLElement {
    constuctor() {
        super();

        this.attachShadow({mode: 'open'}) // –í–∫–ª—é—á–∞–µ—Ç Shadow DOM

        this.shadowRoot.innerHTML = `
            <style>
             .card {
              padding: 1em;
              border: 1px solid #ccc;
              border-radius: 8px;
              font-family: sans-serif;
            }
            </style>
            
            <div class="card>
                <h2>${this.getAttribute('name') || 'Anonymous'}</h2>
                <slot></slot> <!-- –í—Å—Ç–∞–≤–∫–∞ –≤–Ω—É—Ç—Ä—å –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ -->
            </div>
        `;
    }
}

customElements.define('user-card', UserCard);
````

**index.html**

````html
<!DOCTYPE html>
<html lang="en">
<head>
    <script type="module" src="./user-card.js"></script>
</head>
<body>
<user-card name="Alice">
    <p>Frontend Developer</p>
</user-card>
</body>
</html>
````

## –ñ–∏–∑–Ω–µ–Ω–Ω—ã–π —Ü–∏–∫–ª –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ ##

| –ú–µ—Ç–æ–¥                        | –ö–æ–≥–¥–∞ –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è                          |
|------------------------------|-------------------------------------------|
| `constructor()`              | –ü—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ —ç–ª–µ–º–µ–Ω—Ç–∞                     |
| `connectedCallback()`        | –ö–æ–≥–¥–∞ —ç–ª–µ–º–µ–Ω—Ç –¥–æ–±–∞–≤–ª–µ–Ω –≤ DOM              |
| `disconnectedCallback()`     | –ö–æ–≥–¥–∞ —ç–ª–µ–º–µ–Ω—Ç —É–¥–∞–ª—ë–Ω –∏–∑ DOM               |
| `attributeChangedCallback()` | –ö–æ–≥–¥–∞ –∏–∑–º–µ–Ω—ë–Ω –∞—Ç—Ä–∏–±—É—Ç                     |
| `adoptedCallback()`          | –ö–æ–≥–¥–∞ —ç–ª–µ–º–µ–Ω—Ç –ø–µ—Ä–µ–º–µ—â—ë–Ω –≤ –¥—Ä—É–≥–æ–π –¥–æ–∫—É–º–µ–Ω—Ç |

–ü—Ä–∏–º–µ—Ä —Å –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ–º –º–µ—Ç–æ–¥–æ–≤ –∂–∏–∑–Ω–µ–Ω–Ω–æ–≥–æ —Ü–∏–∫–ª–∞:

````javascript
class HelloElement extends HTMLElement {
    static get observedAttributes() {
        return ['name'];
    }

    attributeChangedCallback(name, oldValue, newValue) {
        this.shadowRoot.querySelector('h1').textContent = `Hello, ${newValue}!`;
    }

    connectedCallback() {
        this.attachShadow({mode: 'open'});
        this.shadowRoot.innerHTML = `<h1>Hello, ${this.getAttribute('name')}!</h1>`;
    }
}

customElements.define('hello-element', HelloElement);
````

## –ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å? ##

Custom Elements —Ö–æ—Ä–æ—à–∏, –∫–æ–≥–¥–∞:

* –ü–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ UI-–±–ª–æ–∫–∏
* –ë–µ–∑ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Ñ—Ä–µ–π–º—Ñ–æ—Ä–∫–æ–≤ –∏ –±–∏–±–ª–∏–æ—Ç–µ–∫
* –ò–Ω–∫–∞–ø—Å—É–ª–∏—Ä–æ–≤–∞–Ω–∏–µ —Å—Ç–∏–ª–µ–π –∏ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã
* –ù–∞–ø–∏—Å–∞–Ω–∏–µ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–æ–π –¥–∏–∑–∞–π–Ω-—Å–∏—Å—Ç–µ–º—ã –∏–ª–∏ UI –±–∏–±–ª–∏–æ—Ç–µ–∫–∏

–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è:

* –ù–µ–æ–±—Ö–æ–¥–∏–º–æ —Å–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ –ø—Ä–æ–¥—É–º—ã–≤–∞—Ç—å —Ä–µ–∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å
* Shadow DOM –æ–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ—Ç –≥–ª–æ–±–∞–ª—å–Ω—ã–µ —Å—Ç–∏–ª–∏
* –ù–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ IE (–∏ –≤ —Å—Ç–∞—Ä—ã—Ö –±—Ä–∞—É–∑–µ—Ä–∞—Ö)

## Shadow DOM ##

Shadow DOM - —ç—Ç–æ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏—è, –∫–æ—Ç–æ—Ä–∞—è —Å–æ–∑–¥–∞–µ—Ç –∏–Ω–∫–∞–ø—Å—É–ª–∏—Ä–æ–≤–∞–Ω–Ω—É—é –æ–±–ª–∞—Å—Ç—å –≤–Ω—É—Ç—Ä–∏ —ç–ª–µ–º–µ–Ω—Ç–∞, –≥–¥–µ —Ç–≤–æ—è —Ä–∞–∑–º–µ—Ç–∫–∞ –∏ —Å—Ç–∏–ª–∏ –Ω–µ
–≤–∏–¥–Ω—ã —Å–Ω–∞—Ä—É–∂–∏
–∏ –Ω–µ –∫–æ–Ω—Ñ–ª–∏–∫—Ç—É—é—Ç —Å –æ—Å—Ç–∞–ª—å–Ω—ã–º–∏ —Å—Ç–∏–ª—è–º–∏ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ.

–ü—Ä–∏–º–µ—Ä –±–µ–∑ Shadow DOM

````html

<div class="card">
    <h2>Hello</h2>
</div>

<style>
    h2 {
        color: red;
    }
</style>
````

–í—Å–µ `<h2>` –±—É–¥—É—Ç –∫—Ä–∞—Å–Ω—ã–º–∏ - –≥–ª–æ–±–∞–ª—å–Ω—ã–π —Å—Ç–∏–ª—å.

–ü—Ä–∏–º–µ—Ä —Å Shadow DOM

````js
class MyCard extends HTMLElement {
    constructor() {
        super();
        this.attachShadow({mode: 'open'}); // —Å–æ–∑–¥–∞—ë–º shadow root
        this.shadowRoot.innerHTML = `
      <style>
        h2 { color: blue; } /* —ç—Ç–æ –≤–∏–¥–Ω–æ —Ç–æ–ª—å–∫–æ –≤–Ω—É—Ç—Ä–∏ shadow DOM */
      </style>
      <h2>Hello from Shadow</h2>
    `;
    }
}

customElements.define('my-card', MyCard);
````

````html

<my-card></my-card>
````

–¶–≤–µ—Ç `<h2>` –≤–Ω—É—Ç—Ä–∏ `<my-card>` –±—É–¥–µ—Ç —Å–∏–Ω–∏–º, –≥–ª–æ–±–∞–ª—å–Ω—ã–µ —Å—Ç–∏–ª–∏ –Ω–∞ –Ω–µ–≥–æ –Ω–µ –ø–æ–≤–ª–∏—è—é—Ç.

## –ß—Ç–æ –¥–∞–µ—Ç Shadow DOM? ##

| –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å                | –ü–æ–ª—å–∑–∞                                                                           |
|----------------------------|----------------------------------------------------------------------------------|
| üß± –ò–Ω–∫–∞–ø—Å—É–ª—è—Ü–∏—è            | –°—Ç–∏–ª–∏ –≤–Ω—É—Ç—Ä–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ **–Ω–µ –ø—Ä–æ—Ç–µ–∫–∞—é—Ç –Ω–∞—Ä—É–∂—É**                                  |
| üîí –ó–∞—â–∏—Ç–∞ –æ—Ç –≤–Ω–µ—à–Ω–∏—Ö CSS   | –ò –≤–Ω–µ—à–Ω–∏–µ —Å—Ç–∏–ª–∏ **–Ω–µ –ø–æ—Ä—Ç—è—Ç –≤–Ω—É—Ç—Ä–µ–Ω–Ω—é—é –≤–µ—Ä—Å—Ç–∫—É**                                 |
| üßº –õ–æ–∫–∞–ª—å–Ω—ã–π JavaScript    | –ú–æ–∂–Ω–æ –∏—Å–∫–∞—Ç—å —ç–ª–µ–º–µ–Ω—Ç—ã —Ç–æ–ª—å–∫–æ –≤–Ω—É—Ç—Ä–∏ shadow DOM (`this.shadowRoot.querySelector`) |
| üß© –ò–∑–æ–ª—è—Ü–∏—è UI-–∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ | –£–¥–æ–±–Ω–æ —Å–æ–∑–¥–∞–≤–∞—Ç—å –Ω–µ–∑–∞–≤–∏—Å–∏–º—ã–µ –≤–∏–¥–∂–µ—Ç—ã                                             |

## –°–∏–Ω—Ç–∞–∫—Å–∏—Å ##

````javascript
this.attachShadow({mode: 'open'});
````

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –û–ø–∏—Å–∞–Ω–∏–µ                                                 |
|----------|----------------------------------------------------------|
| `open`   | –¥–æ—Å—Ç—É–ø –∫ shadowRoot –≤–æ–∑–º–æ–∂–µ–Ω –∏–∑–≤–Ω–µ (`.shadowRoot`)       |
| `closed` | `element.shadowRoot === null` ‚Äî —Ç–æ–ª—å–∫–æ –≤–Ω—É—Ç—Ä–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ |

## –í–∞–∂–Ω–æ ##

* Shadow DOM –Ω–µ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –≤ –æ–±—ã—á–Ω–æ–º `document.querySelector()`
* –û–Ω –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –≤ DevTools, –Ω–æ –ø–æ–º–µ—á–∞–µ—Ç—Å—è –∫–∞–∫ `#shadow-root`
* –¢–æ–ª—å–∫–æ –æ–¥–∏–Ω Shadow DOM –Ω–∞ —ç–ª–µ–º–µ–Ω—Ç
* –ü—Å–µ–≤–¥–æ—ç–ª–µ–º–µ–Ω—Ç—ã (`::before`, `::after`) —Ä–∞–±–æ—Ç–∞—é—Ç —Ç–æ–ª—å–∫–æ –≤–Ω—É—Ç—Ä–∏ shadow DOM, –Ω–µ —Å–Ω–∞—Ä—É–∂–∏

## –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –≥–ª–æ–±–∞–ª—å–Ω—ã—Ö —Å—Ç–∏–ª–µ–π –∫ customElement ##

–ì–ª–æ–±–∞–ª—å–Ω—ã–µ —Å—Ç–∏–ª–∏ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –Ω–µ –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è –∫ —Å–æ–¥–µ—Ä–∂–∏–º–æ–º—É custom element,
–µ—Å–ª–∏ —É –Ω–µ–≥–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è Shadow DOM.

–ï—Å—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ —Å–ø–æ—Å–æ–±–æ–≤, –∫–∞–∫ –ø—Ä–∏–º–µ–Ω–∏—Ç—å –≥–ª–æ–±–∞–ª—å–Ω—ã–µ —Å—Ç–∏–ª–∏ –≤–Ω—É—Ç—Ä—å –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞:

### –ù–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Shadow DOM ###

–ï—Å–ª–∏ –Ω–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è this.attachShadow, —Ç–æ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ –æ–±—ã—á–Ω–æ–º DOM –∏ –≥–ª–æ–±–∞–ª—å–Ω—ã–µ —Å—Ç–∏–ª–∏ –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏.

````javascript
class MyBox extends HTMLElement {
  connectedCallback() {
    this.innerHTML = `<p class="text">Hello</p>`;
  }
}
customElements.define('my-box', MyBox);
````

````css
.text {
    color: red;
}
````

* **–ü–ª—é—Å—ã**: –ì–ª–æ–±–∞–ª—å–Ω—ã–µ —Å—Ç–∏–ª–∏ –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è.
* **–ú–∏–Ω—É—Å—ã**: –ù–µ—Ç –∏–Ω–∫–∞–ø—Å—É–ª—è—Ü–∏–∏, –º–æ–≥—É—Ç –±—ã—Ç—å –∫–æ–Ω—Ñ–ª–∏–∫—Ç—ã.